# 概述

垃圾收集需要完成的三件事：

- WHAT: 哪些内存需要回收？
- WHEN: 什么时候回收？
- HOW: 如何回收？

程序计数器、虚拟机栈、本地方法栈 3 个区域随线程而生，随线程而灭，栈中的栈帧随着方法的进入和退出执行出栈和入栈的操作。每一个栈帧中分配多少内存基本上是在类结构确定下来时就已知的，因此这几个区域的内存分配和回收都具备确定性，当方法结束或者线程结束时，内存自然随着回收了。

Java 堆和方法区这两个区域存在很多不确定性：一个接口的多个实现类需要的内存可能不一样，一个方法所执行的不同条件分支所需要的内存也可能不一样，只有处于运行期间，才能知道程序究竟会创建哪些对象，创建多少对象，这部分内存的分配和回收是动态的。
